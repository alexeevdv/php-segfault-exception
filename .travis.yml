language: php
php:
- '5.4'
- '5.5'
- '5.6'
- '7.0'
- '7.1'
- '7.2'

matrix:
  include:
  - php: 7.3.0RC1
    dist: xenial
    sudo: required
    addons:
      apt:
        packages:
        - libzip4
    script:
    - vendor/bin/phpcs --standard=PSR2 --extensions=php src
    - phpdbg -qrr vendor/bin/codecept run --coverage --coverage-xml

install:
- composer install --no-interaction

script:
- vendor/bin/phpcs --standard=PSR2 --extensions=php src
- php vendor/bin/codecept run --coverage --coverage-xml

after_success:
- bash <(curl -s https://codecov.io/bash)
